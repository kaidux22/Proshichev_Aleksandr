{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Output } from '@angular/core';\nexport let FriendListComponent = class FriendListComponent {\n  constructor(router, GetFriends) {\n    this.router = router;\n    this.GetFriends = GetFriends;\n    this.selectedUsr = new EventEmitter();\n    this.friends = [];\n    this.nonames = [];\n    this.fullfriends = [];\n    this.fullnonames = [];\n    this.options = [\"Перейти в профиль\", \"Добавить в друзья\", \"Удалить из друзей\"];\n    this.chosen = -1;\n    this.idx = this.router.snapshot.params['id'];\n  }\n  ngOnInit() {\n    this.CreateList();\n  }\n  CreateList() {\n    this.fullfriends = [];\n    this.fullnonames = [];\n    this.friends = [];\n    this.nonames = [];\n    this.GetFriends.GetUsers().subscribe(users => {\n      for (let i = 0; i < users.length; i++) {\n        if (users[i].id == this.idx) {\n          this.user = users[i];\n          continue;\n        }\n        if (users[this.idx].friends.indexOf(users[i].id) == -1) {\n          if (users[i].status == \"blocked\") {\n            continue;\n          }\n          this.fullnonames.push(users[i]);\n          this.nonames.push(users[i]);\n        } else {\n          this.fullfriends.push(users[i]);\n          this.friends.push(users[i]);\n        }\n      }\n    });\n  }\n  Search(ev) {\n    if (this.search == '') {\n      this.friends = this.fullfriends;\n      this.nonames = this.fullnonames;\n    }\n    this.friends = [];\n    this.nonames = [];\n    for (let i = 0; i < this.fullfriends.length; i++) {\n      let name = this.fullfriends[i].lastName + \" \" + this.fullfriends[i].name;\n      if (name.indexOf(this.search) != -1) {\n        this.friends.push(this.fullfriends[i]);\n      }\n    }\n    for (let i = 0; i < this.fullnonames.length; i++) {\n      let name = this.fullnonames[i].lastName + \" \" + this.fullnonames[i].name;\n      if (name.indexOf(this.search) != -1) {\n        this.nonames.push(this.fullnonames[i]);\n      }\n    }\n  }\n  ChooseMenu(option, user) {\n    switch (option) {\n      case this.options[0]:\n        break;\n      case this.options[1]:\n        this.user.friends.push(user.id);\n        this.user.friends.sort((a, b) => {\n          return Number(a) - Number(b);\n        });\n        this.GetFriends.EditUser(this.user).subscribe(() => {\n          this.CreateList();\n        });\n        break;\n      case this.options[2]:\n        let idx = this.user.friends.indexOf(user.id);\n        if (idx != -1) this.user.friends.splice(idx, 1);\n        this.GetFriends.EditUser(this.user).subscribe(() => {\n          this.CreateList();\n        });\n        break;\n    }\n  }\n  ChooseChat(user) {\n    this.chosen = user.id;\n    this.selectedUsr.emit(this.chosen);\n  }\n};\n__decorate([Output()], FriendListComponent.prototype, \"selectedUsr\", void 0);\nFriendListComponent = __decorate([Component({\n  selector: 'friend-list',\n  templateUrl: './friend-list.component.html',\n  styleUrls: ['./friend-list.component.less']\n})], FriendListComponent);","map":{"version":3,"names":["Component","EventEmitter","Output","FriendListComponent","constructor","router","GetFriends","selectedUsr","friends","nonames","fullfriends","fullnonames","options","chosen","idx","snapshot","params","ngOnInit","CreateList","GetUsers","subscribe","users","i","length","id","user","indexOf","status","push","Search","ev","search","name","lastName","ChooseMenu","option","sort","a","b","Number","EditUser","splice","ChooseChat","emit","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/kaidux22/Desktop/git_work/Proshichev_Aleksandr/University/Web/social-network/Client/src/app/components/friend-list/friend-list.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { IUser } from 'src/app/models/interfaces';\nimport { ActivatedRoute } from '@angular/router';\nimport { UserGet } from 'src/app/services/user.service';\n\n@Component({\n  selector: 'friend-list',\n  templateUrl: './friend-list.component.html',\n  styleUrls: ['./friend-list.component.less']\n})\nexport class FriendListComponent implements OnInit{\n  @Output() selectedUsr = new EventEmitter<number>() \n\n  friends : IUser[] = []\n  nonames : IUser[] = []\n  fullfriends : IUser[] = []\n  fullnonames : IUser[] = []\n  user : IUser;\n  options: string[] = [\"Перейти в профиль\", \"Добавить в друзья\", \"Удалить из друзей\"]\n  idx : number\n  search : string\n  chosen : number = -1\n\n  constructor(private router : ActivatedRoute, private GetFriends : UserGet){\n    this.idx = this.router.snapshot.params['id']\n  }\n\n  ngOnInit(): void {\n    this.CreateList()\n  }\n\n  CreateList(): void{\n    this.fullfriends = []\n    this.fullnonames = []\n    this.friends = []\n    this.nonames = []\n    this.GetFriends.GetUsers().subscribe(users => {\n      for(let i = 0; i < users.length; i++){\n        if(users[i].id == this.idx){\n          this.user = users[i]\n          continue\n        }\n\n        if(users[this.idx].friends.indexOf(users[i].id) == -1){\n          if(users[i].status == \"blocked\"){\n            continue\n          }\n          this.fullnonames.push(users[i])\n          this.nonames.push(users[i])\n        }\n        else{\n          this.fullfriends.push(users[i])\n          this.friends.push(users[i])\n        }\n\n      }\n  })\n  }\n\n  Search(ev : any): void{\n    if(this.search == ''){\n      this.friends = this.fullfriends\n      this.nonames = this.fullnonames\n    }\n\n    this.friends = []\n    this.nonames = []\n\n    for(let i = 0; i < this.fullfriends.length; i++){\n      let name = this.fullfriends[i].lastName + \" \" + this.fullfriends[i].name\n\n      if(name.indexOf(this.search) != -1){\n        this.friends.push(this.fullfriends[i])\n      }\n    }\n\n    for(let i = 0; i < this.fullnonames.length; i++){\n      let name = this.fullnonames[i].lastName + \" \" + this.fullnonames[i].name\n\n      if(name.indexOf(this.search) != -1){\n        this.nonames.push(this.fullnonames[i])\n      }\n    }\n  } \n\n  ChooseMenu(option : string, user : IUser): void{\n    switch(option){\n      case this.options[0]:\n        break\n      case this.options[1]:\n        this.user.friends.push(user.id)\n        this.user.friends.sort((a: string, b: string) => {return Number(a) - Number(b)})\n        this.GetFriends.EditUser(this.user).subscribe(() => {\n          this.CreateList()\n        })\n        break\n      case this.options[2]:\n        let idx = this.user.friends.indexOf(user.id)\n        if(idx != -1)\n          this.user.friends.splice(idx, 1)\n        this.GetFriends.EditUser(this.user).subscribe(() => {\n            this.CreateList()\n        })\n        break\n    }\n  }\n\n  ChooseChat(user: IUser): void{\n    this.chosen = user.id\n    this.selectedUsr.emit(this.chosen)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}